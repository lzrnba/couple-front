# 鉴权模块接口文档

## 1. 概述

本文档描述了情侣空间应用的鉴权模块API接口，包括用户注册、登录、验证码发送和密码重置等功能。

## 2. 公共说明

### 2.1 基础URL
```
http://localhost:8080/api/auth
```

### 2.2 请求格式
- 所有请求均使用JSON格式
- Content-Type: application/json

### 2.3 响应格式
- 所有响应均为JSON格式
- 使用统一响应拦截器封装，格式如下：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {}
  }
  ```

## 3. 接口列表

### 3.1 发送验证码邮件

#### 接口地址
```
POST /send-email
```

#### 请求参数
| 参数名 | 类型   | 必填 | 说明     |
| ------ | ------ | ---- | -------- |
| email  | string | 是   | 用户邮箱 |

#### 请求示例
```json
{
  "email": "user@example.com"
}
```

#### 响应示例
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

### 3.2 用户注册

#### 接口地址
```
POST /register
```

#### 请求参数
| 参数名   | 类型   | 必填 | 说明     |
| -------- | ------ | ---- | -------- |
| email    | string | 是   | 用户邮箱 |
| password | string | 是   | 用户密码 |
| nickname | string | 是   | 用户昵称 |
| code     | string | 是   | 验证码   |

#### 请求示例
```json
{
  "email": "user@example.com",
  "password": "123456",
  "code": "123456"
}
```

#### 响应示例
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

### 3.3 用户登录

#### 接口地址
```
POST /login
```

#### 请求参数
| 参数名   | 类型   | 必填 | 说明     |
| -------- | ------ | ---- | -------- |
| email    | string | 是   | 用户邮箱 |
| password | string | 是   | 用户密码 |

#### 请求示例
```json
{
  "email": "user@example.com",
  "password": "123456"
}
```

#### 响应示例
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiJ9..."
  }
}
```

#### 失败响应示例
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "error": "登录失败，邮箱或密码错误"
  }
}
```

### 3.4 重置密码

#### 接口地址
```
POST /reset-password
```

#### 请求参数
| 参数名      | 类型   | 必填 | 说明     |
| ----------- | ------ | ---- | -------- |
| email       | string | 是   | 用户邮箱 |
| newPassword | string | 是   | 新密码   |
| code        | string | 是   | 验证码   |

#### 请求示例
```json
{
  "email": "user@example.com",
  "newPassword": "newpassword123",
  "code": "123456"
}
```

#### 响应示例
```json
{
  "code": 200,
  "message": "success",
  "data": true
}
```

### 3.5 获取当前用户信息

#### 接口地址
```
GET /current-user
```

#### 请求头
```
Authorization: Bearer <token>
```

#### 响应示例
```json
{
  "code": 200,
  "message": "success",
  "data": "user@example.com"
}
```

## 4. 错误码说明

| 错误码 | 说明                     |
| ------ | ------------------------ |
| 200    | 请求成功                 |
| 400    | 客户端错误（参数错误等） |
| 401    | 未认证                   |
| 403    | 未授权                   |
| 500    | 服务器内部错误           |

## 5. 注意事项

1. 所有需要认证的接口都需要在请求头中携带token：
   ```
   Authorization: Bearer <token>
   ```
2. 验证码有效期为5分钟
3. 密码在传输和存储过程中都会进行加密处理
4. 用户邮箱在系统中是唯一的，不可重复注册